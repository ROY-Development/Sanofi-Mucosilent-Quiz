<IfModule mod_rewrite.c>
  RewriteEngine On

  RewriteBase /mucosilent/

  # Redirection to HTTPS:
  RewriteCond %{HTTPS} !on
  RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

  # Redirection of requests to index.html
  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR]
  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d
  RewriteRule ^.*$ - [NC,L]
  # Redirect all non-file routes to index.html
  RewriteRule ^(?!.*\.).*$ index.html [NC,L]
</IfModule>

<IfModule mod_headers.c>
	Header set Access-Control-Allow-Origin "https://editor.r-o-y.de"
</IfModule>

<FilesMatch "\.(html|js|css|json|png|jpg|svg)$">
    FileETag None
    Header unset ETag
    Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    Header set Pragma "no-cache"
    Header set Expires "Thu, 01 Jan 1970 00:00:00 GMT"
</FilesMatch>

<IfModule mod_deflate.c>
    # compress HTML, CSS, JavaScript, Text, XML and fonts
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css
    AddOutputFilterByType DEFLATE application/javascript application/x-javascript
    AddOutputFilterByType DEFLATE application/xml application/rss+xml
    AddOutputFilterByType DEFLATE application/font-woff application/font-woff2
    AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
    AddOutputFilterByType DEFLATE font/ttf font/opentype font/x-woff

    # compress MP4-, MP3-, JPG-, PNG and SVG files
    AddOutputFilterByType DEFLATE video/mp4
    AddOutputFilterByType DEFLATE audio/mpeg
    AddOutputFilterByType DEFLATE image/jpeg
    AddOutputFilterByType DEFLATE image/png
    AddOutputFilterByType DEFLATE image/svg+xml
</IfModule>

<FilesMatch "\.(php|json)$">
SetOutputFilter DEFLATE
</FilesMatch>